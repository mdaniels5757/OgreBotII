(function(){var e=e||{};e.scope={};e.ASSUME_ES5=!1;e.ASSUME_NO_NATIVE_MAP=!1;e.ASSUME_NO_NATIVE_SET=!1;e.defineProperty=e.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)};e.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};e.global=e.getGlobal(this);e.SYMBOL_PREFIX="jscomp_symbol_";
e.initSymbol=function(){e.initSymbol=function(){};e.global.Symbol||(e.global.Symbol=e.Symbol)};e.Symbol=function(){var a=0;return function(b){return e.SYMBOL_PREFIX+(b||"")+a++}}();e.initSymbolIterator=function(){e.initSymbol();var a=e.global.Symbol.iterator;a||(a=e.global.Symbol.iterator=e.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&e.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return e.arrayIterator(this)}});e.initSymbolIterator=function(){}};
e.arrayIterator=function(a){var b=0;return e.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};e.iteratorPrototype=function(a){e.initSymbolIterator();a={next:a};a[e.global.Symbol.iterator]=function(){return this};return a};e.makeIterator=function(a){e.initSymbolIterator();e.initSymbol();e.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):e.arrayIterator(a)};
e.polyfill=function(a,b){if(b){var d=e.global;a=a.split(".");for(var g=0;g<a.length-1;g++){var f=a[g];f in d||(d[f]={});d=d[f]}a=a[a.length-1];g=d[a];b=b(g);b!=g&&null!=b&&e.defineProperty(d,a,{configurable:!0,writable:!0,value:b})}};e.FORCE_POLYFILL_PROMISE=!1;
e.polyfill("Promise",function(a){function b(c){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{c(a.resolve,a.reject)}catch(l){a.reject(l)}}function d(){this.batch_=null}function g(c){return c instanceof b?c:new b(function(a){a(c)})}if(a&&!e.FORCE_POLYFILL_PROMISE)return a;d.prototype.asyncExecute=function(c){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(c);return this};d.prototype.asyncExecuteBatch_=function(){var c=
this;this.asyncExecuteFunction(function(){c.executeBatch_()})};var f=e.global.setTimeout;d.prototype.asyncExecuteFunction=function(c){f(c,0)};d.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var c=this.batch_;this.batch_=[];for(var a=0;a<c.length;++a){var b=c[a];delete c[a];try{b()}catch(m){this.asyncThrow_(m)}}}this.batch_=null};d.prototype.asyncThrow_=function(c){this.asyncExecuteFunction(function(){throw c;})};b.prototype.createResolveAndReject_=function(){function c(c){return function(h){b||
(b=!0,c.call(a,h))}}var a=this,b=!1;return{resolve:c(this.resolveTo_),reject:c(this.reject_)}};b.prototype.resolveTo_=function(c){if(c===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(c instanceof b)this.settleSameAsPromise_(c);else{a:switch(typeof c){case "object":var a=null!=c;break a;case "function":a=!0;break a;default:a=!1}a?this.resolveToNonPromiseObj_(c):this.fulfill_(c)}};b.prototype.resolveToNonPromiseObj_=function(a){var c=void 0;try{c=a.then}catch(l){this.reject_(l);
return}"function"==typeof c?this.settleSameAsThenable_(c,a):this.fulfill_(a)};b.prototype.reject_=function(a){this.settle_(2,a)};b.prototype.fulfill_=function(a){this.settle_(1,a)};b.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};b.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=this.onSettledCallbacks_,
b=0;b<a.length;++b)a[b].call(),a[b]=null;this.onSettledCallbacks_=null}};var k=new d;b.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};b.prototype.settleSameAsThenable_=function(a,b){var c=this.createResolveAndReject_();try{a.call(b,c.resolve,c.reject)}catch(m){c.reject(m)}};b.prototype.then=function(a,d){function c(a,b){return"function"==typeof a?function(b){try{h(a(b))}catch(r){g(r)}}:b}var h,g,f=new b(function(a,b){h=a;g=b});
this.callWhenSettled_(c(a,h),c(d,g));return f};b.prototype.catch=function(a){return this.then(void 0,a)};b.prototype.callWhenSettled_=function(a,b){function c(){switch(d.state_){case 1:a(d.result_);break;case 2:b(d.result_);break;default:throw Error("Unexpected state: "+d.state_);}}var d=this;null==this.onSettledCallbacks_?k.asyncExecute(c):this.onSettledCallbacks_.push(function(){k.asyncExecute(c)})};b.resolve=g;b.reject=function(a){return new b(function(b,c){c(a)})};b.race=function(a){return new b(function(b,
c){for(var d=e.makeIterator(a),h=d.next();!h.done;h=d.next())g(h.value).callWhenSettled_(b,c)})};b.all=function(a){var c=e.makeIterator(a),d=c.next();return d.done?g([]):new b(function(a,b){function h(b){return function(c){f[b]=c;l--;0==l&&a(f)}}var f=[],l=0;do f.push(void 0),l++,g(d.value).callWhenSettled_(h(f.length-1),b),d=c.next();while(!d.done)})};return b},"es6","es3");
e.executeAsyncGenerator=function(a){function b(b){return a.next(b)}function d(b){return a.throw(b)}return new Promise(function(g,f){function k(a){a.done?g(a.value):Promise.resolve(a.value).then(b,d).then(k,f)}k(a.next())})};e.checkStringArgs=function(a,b,d){if(null==a)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return a+""};
e.polyfill("String.prototype.endsWith",function(a){return a?a:function(a,d){var b=e.checkStringArgs(this,a,"endsWith");a+="";void 0===d&&(d=b.length);d=Math.max(0,Math.min(d|0,b.length));for(var f=a.length;0<f&&0<d;)if(b[--d]!=a[--f])return!1;return 0>=f}},"es6","es3");var p=window.top,q=p.location,t;location.pathname.endsWith("/complete.php")&&window.history.pushState("","","start.php");
angular.module("app",["ngCookies"]).controller("ctrl",["$scope","$http","$log","$interval","$cookies",function(a,b,d,g,f){function k(b){t&&p.postMessage({state:b,cookie:a.cookie},location.origin)}angular.extend(a,{authorize:function(){return e.executeAsyncGenerator(function(){function c(c,h,l){for(;;)switch(d){case 0:return a.ajax=!0,d=1,{value:b({url:"authorize.php"}),done:!1};case 1:if(1!=c){d=2;break}d=-1;throw l;case 2:g=k=h,f=g.data.redirect,a.ajax=!1,f&&(q.href=f),d=-1;default:return{value:void 0,
done:!0}}}var d=0,f,g,k,n={next:function(a){return c(0,a,void 0)},throw:function(a){return c(1,void 0,a)},return:function(){throw Error("Not yet implemented");}};e.initSymbolIterator();n[Symbol.iterator]=function(){return this};return n}())},logout:function(){return e.executeAsyncGenerator(function(){function c(c,h,k){for(;;)switch(d){case 0:return a.ajax=!0,d=1,{value:b({url:"logout.php"}),done:!1};case 1:if(1!=c){d=2;break}d=-1;throw k;case 2:f=g=h,a.ajax=!1,f.data.success&&(a.username=a.cookie=
null),d=-1;default:return{value:void 0,done:!0}}}var d=0,f,g,k={next:function(a){return c(0,a,void 0)},throw:function(a){return c(1,void 0,a)},return:function(){throw Error("Not yet implemented");}};e.initSymbolIterator();k[Symbol.iterator]=function(){return this};return k}())},open:function(){window.open(location.pathname,"_blank")}});a.cookie=f.get("magog-ident");g(function(){var b=f.get("magog-ident");b!==a.cookie&&(a.username=null,a.cookie=b,k("update"))},2E3);window.onmessage=function(a){var b=
a.origin;b!==location.origin?d.error("Bad origin: "+b+" != "+location.origin):(t=(a.data||{}).watch)&&k("initial")}}]).filter("escape",function(){return function(a){return window.encodeURIComponent(a).replace(/%2F/g,"/").replace(/%3A/g,":").replace(/%20/g,"_")}});}).call(this);

//# sourceMappingURL=js/ident.js.map
