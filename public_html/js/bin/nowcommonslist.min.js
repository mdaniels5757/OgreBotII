(function(){var d=d||{};d.scope={};d.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};d.arrayIterator=function(a){return{next:d.arrayIteratorImpl(a)}};d.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):d.arrayIterator(a)};d.arrayFromIterator=function(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c};d.arrayFromIterable=function(a){return a instanceof Array?a:d.arrayFromIterator(d.makeIterator(a))};
d.ASSUME_ES5=!1;d.ASSUME_NO_NATIVE_MAP=!1;d.ASSUME_NO_NATIVE_SET=!1;d.SIMPLE_FROUND_POLYFILL=!1;d.objectCreate=d.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};d.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};
d.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:d.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;
d.inherits=function(a,b){a.prototype=d.objectCreate(b.prototype);a.prototype.constructor=a;if(d.setPrototypeOf){var c=d.setPrototypeOf;c(a,b)}else for(c in b)if("prototype"!=c)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,c);e&&Object.defineProperty(a,c,e)}else a[c]=b[c];a.superClass_=b.prototype};d.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};d.global=d.getGlobal(this);
d.defineProperty=d.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};d.polyfill=function(a,b){if(b){var c=d.global;a=a.split(".");for(var e=0;e<a.length-1;e++){var f=a[e];f in c||(c[f]={});c=c[f]}a=a[a.length-1];e=c[a];b=b(e);b!=e&&null!=b&&d.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};d.FORCE_POLYFILL_PROMISE=!1;
d.polyfill("Promise",function(a){function b(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(g){b.reject(g)}}function c(){this.batch_=null}function e(a){return a instanceof b?a:new b(function(b){b(a)})}if(a&&!d.FORCE_POLYFILL_PROMISE)return a;c.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var b=this;this.asyncExecuteFunction(function(){b.executeBatch_()})}this.batch_.push(a)};var f=d.global.setTimeout;
c.prototype.asyncExecuteFunction=function(a){f(a,0)};c.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var g=a[b];a[b]=null;try{g()}catch(m){this.asyncThrow_(m)}}}this.batch_=null};c.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};b.prototype.createResolveAndReject_=function(){function a(a){return function(e){g||(g=!0,a.call(b,e))}}var b=this,g=!1;return{resolve:a(this.resolveTo_),
reject:a(this.reject_)}};b.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof b)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var e=null!=a;break a;case "function":e=!0;break a;default:e=!1}e?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};b.prototype.resolveToNonPromiseObj_=function(a){var b=void 0;try{b=a.then}catch(g){this.reject_(g);return}"function"==typeof b?this.settleSameAsThenable_(b,
a):this.fulfill_(a)};b.prototype.reject_=function(a){this.settle_(2,a)};b.prototype.fulfill_=function(a){this.settle_(1,a)};b.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};b.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)k.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var k=new c;b.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};b.prototype.settleSameAsThenable_=function(a,b){var g=this.createResolveAndReject_();try{a.call(b,g.resolve,g.reject)}catch(m){g.reject(m)}};b.prototype.then=function(a,e){function g(a,b){return"function"==typeof a?function(b){try{c(a(b))}catch(v){f(v)}}:b}var c,f,h=new b(function(a,b){c=a;f=b});this.callWhenSettled_(g(a,c),g(e,f));return h};
b.prototype.catch=function(a){return this.then(void 0,a)};b.prototype.callWhenSettled_=function(a,b){function g(){switch(e.state_){case 1:a(e.result_);break;case 2:b(e.result_);break;default:throw Error("Unexpected state: "+e.state_);}}var e=this;null==this.onSettledCallbacks_?k.asyncExecute(g):this.onSettledCallbacks_.push(g)};b.resolve=e;b.reject=function(a){return new b(function(b,g){g(a)})};b.race=function(a){return new b(function(b,g){for(var c=d.makeIterator(a),f=c.next();!f.done;f=c.next())e(f.value).callWhenSettled_(b,
g)})};b.all=function(a){var c=d.makeIterator(a),g=c.next();return g.done?e([]):new b(function(a,b){function f(b){return function(g){m[b]=g;u--;0==u&&a(m)}}var m=[],u=0;do m.push(void 0),u++,e(g.value).callWhenSettled_(f(m.length-1),b),g=c.next();while(!g.done)})};return b},"es6","es3");d.SYMBOL_PREFIX="jscomp_symbol_";d.initSymbol=function(){d.initSymbol=function(){};d.global.Symbol||(d.global.Symbol=d.Symbol)};
d.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;d.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};d.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};d.Symbol=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new d.SymbolClass(d.SYMBOL_PREFIX+(c||"")+"_"+b++,c)}var b=0;return a}();
d.initSymbolIterator=function(){d.initSymbol();var a=d.global.Symbol.iterator;a||(a=d.global.Symbol.iterator=d.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&d.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return d.iteratorPrototype(d.arrayIteratorImpl(this))}});d.initSymbolIterator=function(){}};
d.initSymbolAsyncIterator=function(){d.initSymbol();var a=d.global.Symbol.asyncIterator;a||(a=d.global.Symbol.asyncIterator=d.global.Symbol("Symbol.asyncIterator"));d.initSymbolAsyncIterator=function(){}};d.iteratorPrototype=function(a){d.initSymbolIterator();a={next:a};a[d.global.Symbol.iterator]=function(){return this};return a};d.generator={};d.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
d.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};d.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};d.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
d.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};d.generator.Context.prototype.next_=function(a){this.yieldResult=a};d.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};d.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};
d.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};d.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};d.generator.Context.prototype.yieldAll=function(a,b){a=d.makeIterator(a);var c=a.next();d.generator.ensureIteratorResultIsObject_(c);if(c.done)this.yieldResult=c.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(c.value,b)};
d.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};d.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};d.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};d.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};d.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
d.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};d.generator.Context.prototype.enterFinallyBlock=function(a,b,c){c?this.finallyContexts_[c]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
d.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};d.generator.Context.prototype.forIn=function(a){return new d.generator.Context.PropertyIterator(a)};
d.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};d.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};d.generator.Engine_=function(a){this.context_=new d.generator.Context;this.program_=a};
d.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};d.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(a){return{value:a,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
d.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
d.generator.Engine_.prototype.yieldAllStep_=function(a,b,c){try{var e=a.call(this.context_.yieldAllIterator_,b);d.generator.ensureIteratorResultIsObject_(e);if(!e.done)return this.context_.stop_(),e;var f=e.value}catch(k){return this.context_.yieldAllIterator_=null,this.context_.throw_(k),this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,f);return this.nextStep_()};
d.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
d.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};d.initSymbolIterator();this[Symbol.iterator]=function(){return this}};d.generator.createGenerator=function(a,b){b=new d.generator.Generator_(new d.generator.Engine_(b));d.setPrototypeOf&&d.setPrototypeOf(b,a.prototype);return b};
d.asyncExecutePromiseGenerator=function(a){function b(b){return a.next(b)}function c(b){return a.throw(b)}return new Promise(function(e,f){function k(a){a.done?e(a.value):Promise.resolve(a.value).then(b,c).then(k,f)}k(a.next())})};d.asyncExecutePromiseGeneratorFunction=function(a){return d.asyncExecutePromiseGenerator(a())};d.asyncExecutePromiseGeneratorProgram=function(a){return d.asyncExecutePromiseGenerator(new d.generator.Generator_(new d.generator.Engine_(a)))};
d.polyfill("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}},"es6","es3");d.polyfill("Array.prototype.includes",function(a){return a?a:function(a,c){var b=this;b instanceof String&&(b=String(b));var f=b.length;c=c||0;for(0>c&&(c=Math.max(c+f,0));c<f;c++){var k=b[c];if(k===a||Object.is(k,a))return!0}return!1}},"es7","es3");
d.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};d.polyfill("String.prototype.includes",function(a){return a?a:function(a,c){return-1!==d.checkStringArgs(this,a,"includes").indexOf(a,c||0)}},"es6","es3");
d.iteratorFromArray=function(a,b){d.initSymbolIterator();a instanceof String&&(a+="");var c=0,e={next:function(){if(c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};
d.polyfill("Array.from",function(a){return a?a:function(a,c,e){c=null!=c?c:function(a){return a};var b=[],k="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if("function"==typeof k){a=k.call(a);for(var h=0;!(k=a.next()).done;)b.push(c.call(e,k.value,h++))}else for(k=a.length,h=0;h<k;h++)b.push(c.call(e,a[h],h));return b}},"es6","es3");
d.checkEs6ConformanceViaProxy=function(){try{var a={},b=Object.create(new d.global.Proxy(a,{get:function(c,e,f){return c==a&&"q"==e&&f==b}}));return!0===b.q}catch(c){return!1}};d.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;d.ES6_CONFORMANCE=d.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&d.checkEs6ConformanceViaProxy();d.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
d.polyfill("WeakMap",function(a){function b(a){this.id_=(n+=Math.random()+1).toString();if(a){a=d.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}}function c(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),e=Object.seal({}),c=new a([[b,2],[e,3]]);if(2!=c.get(b)||3!=c.get(e))return!1;c.delete(b);c.set(e,4);return!c.has(b)&&4==c.get(e)}catch(L){return!1}}function e(){}function f(a){if(!d.owns(a,h)){var b=new e;d.defineProperty(a,h,{value:b})}}function k(a){var b=
Object[a];b&&(Object[a]=function(a){if(a instanceof e)return a;f(a);return b(a)})}if(d.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&d.ES6_CONFORMANCE)return a}else if(c())return a;var h="$jscomp_hidden_"+Math.random();k("freeze");k("preventExtensions");k("seal");var n=0;b.prototype.set=function(a,b){f(a);if(!d.owns(a,h))throw Error("WeakMap key fail: "+a);a[h][this.id_]=b;return this};b.prototype.get=function(a){return d.owns(a,h)?a[h][this.id_]:void 0};b.prototype.has=function(a){return d.owns(a,
h)&&d.owns(a[h],this.id_)};b.prototype.delete=function(a){return d.owns(a,h)&&d.owns(a[h],this.id_)?delete a[h][this.id_]:!1};return b},"es6","es3");d.MapEntry=function(){};
d.polyfill("Map",function(a){function b(){var a={};return a.previous=a.next=a.head=a}function c(a,b){var c=a.head_;return d.iteratorPrototype(function(){if(c){for(;c.head!=a.head_;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}})}function e(a,b){var c=b&&typeof b;"object"==c||"function"==c?h.has(b)?c=h.get(b):(c=""+ ++n,h.set(b,c)):c="p_"+b;var e=a.data_[c];if(e&&d.owns(a.data_,c))for(a=0;a<e.length;a++){var g=e[a];if(b!==b&&g.key!==g.key||
b===g.key)return{id:c,list:e,index:a,entry:g}}return{id:c,list:e,index:-1,entry:void 0}}function f(a){this.data_={};this.head_=b();this.size=0;if(a){a=d.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}}function k(){if(d.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a(d.makeIterator([[b,"s"]]));if("s"!=c.get(b)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;
var e=c.entries(),f=e.next();if(f.done||f.value[0]!=b||"s"!=f.value[1])return!1;f=e.next();return f.done||4!=f.value[0].x||"t"!=f.value[1]||!e.next().done?!1:!0}catch(K){return!1}}if(d.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&d.ES6_CONFORMANCE)return a}else if(k())return a;d.initSymbolIterator();var h=new WeakMap;f.prototype.set=function(a,b){a=0===a?0:a;var c=e(this,a);c.list||(c.list=this.data_[c.id]=[]);c.entry?c.entry.value=b:(c.entry={next:this.head_,previous:this.head_.previous,head:this.head_,
key:a,value:b},c.list.push(c.entry),this.head_.previous.next=c.entry,this.head_.previous=c.entry,this.size++);return this};f.prototype.delete=function(a){a=e(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};f.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=b();this.size=0};f.prototype.has=function(a){return!!e(this,a).entry};
f.prototype.get=function(a){return(a=e(this,a).entry)&&a.value};f.prototype.entries=function(){return c(this,function(a){return[a.key,a.value]})};f.prototype.keys=function(){return c(this,function(a){return a.key})};f.prototype.values=function(){return c(this,function(a){return a.value})};f.prototype.forEach=function(a,b){for(var c=this.entries(),e;!(e=c.next()).done;)e=e.value,a.call(b,e[1],e[0],this)};f.prototype[Symbol.iterator]=f.prototype.entries;var n=0;return f},"es6","es3");
d.polyfill("Set",function(a){function b(a){this.map_=new Map;if(a){a=d.makeIterator(a);for(var b;!(b=a.next()).done;)this.add(b.value)}this.size=this.map_.size}function c(){if(d.ASSUME_NO_NATIVE_SET||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a(d.makeIterator([b]));if(!c.has(b)||1!=c.size||c.add(b)!=c||1!=c.size||c.add({x:4})!=c||2!=c.size)return!1;var k=c.entries(),h=k.next();if(h.done||h.value[0]!=b||h.value[1]!=b)return!1;
h=k.next();return h.done||h.value[0]==b||4!=h.value[0].x||h.value[1]!=h.value[0]?!1:k.next().done}catch(n){return!1}}if(d.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&d.ES6_CONFORMANCE)return a}else if(c())return a;d.initSymbolIterator();b.prototype.add=function(a){a=0===a?0:a;this.map_.set(a,a);this.size=this.map_.size;return this};b.prototype.delete=function(a){a=this.map_.delete(a);this.size=this.map_.size;return a};b.prototype.clear=function(){this.map_.clear();this.size=0};b.prototype.has=function(a){return this.map_.has(a)};
b.prototype.entries=function(){return this.map_.entries()};b.prototype.values=function(){return this.map_.values()};b.prototype.keys=b.prototype.values;b.prototype[Symbol.iterator]=b.prototype.values;b.prototype.forEach=function(a,b){var c=this;this.map_.forEach(function(e){return a.call(b,e,e,c)})};return b},"es6","es3");
d.polyfill("Array.prototype.flatMap",function(a){return a?a:function(a,c){for(var b=[],f=0;f<this.length;f++){var k=a.call(c,this[f],f,this);Array.isArray(k)?b.push.apply(b,k):b.push(k)}return b}},"es9","es5");function w(a,b){this.dialog=$(a).dialog(Object.assign({},{autoOpen:!1,modal:!0,width:600},b))}w.prototype.addOpenButton=function(a){$(a).click(this.open.bind(this))};w.prototype.addCloseButton=function(a){$(a).click(this.close.bind(this))};w.prototype.open=function(){this.dialog.dialog("open")};
w.prototype.close=function(){this.dialog.dialog("close")};function M(){var a=this;this.listeners=[];this._promise=new Promise(function(b,c){ha(function(){var e=$("input[data-xd-auto]");if(e[0]){var f=function(){g.off("message",null,n);m&&clearTimeout(m)},k=$(e).data(),h=k.xdDomain;e=k.xdPath;k=k.xdTimeout;var n=function(c){c=c.originalEvent;c.origin===h&&"ping"===c.data&&(b(),f(),g.on("message",function(b){var c=b.originalEvent;c.origin===h&&a.listeners.forEach(function(a){a(c.data)})}))},g=$(window),m=k&&setTimeout(function(){c();f()},k);g.on("message",
n);a.iframe=$("<iframe/>").attr({style:"display: none",src:h+"/"+e}).appendTo("body");a.origin=h;return!1}(e=$.isReady)&&c();return!e},100)})}M.prototype.addListener=function(a){this.listeners.push(a)};M.prototype.postMessage=function(a){this.iframe[0].contentWindow.postMessage(a,this.origin)};M.prototype.ready=function(){return this._promise};function ha(a,b){function c(){!1===a()&&clearInterval(e)}var e=setInterval(c,b);c()};function N(a){function b(a,b){$(b).css("top",26*a+"px")}"object"!==typeof a&&(a={message:a});var c=$(".topbar:last"),e=$("<div />",{class:"topbar",text:a.message}).css(a.css||{});setTimeout(function(){e.remove();$(".topbar").each(b)},a.delay||5E3);c[0]?c.after(e):$("body").prepend(e);b($(".topbar").length-1,e)};(function(){function a(a){ia.is(":checked")&&($("a.delete").get().forEach(function(b){b=$(b);if(b.data(O)===a){b.closest(B).prev().addBack().remove();var c=+P.attr("max")-1;[Q,P,ba].forEach(function(a){a=$(a);a.attr("max",c).val(Math.min(+a.val(),c))})}}),c())}function b(a){var b=a.lastIndexOf("/");if(0>a.indexOf("\n")&&a.match(/^\/.*?\/[mi]*$/))try{return new RegExp(a.substring(1,b),a.substring(b+1))}catch(ja){}}function c(){var a=C.val();C.html("").append("<option/>").append(Array.from(new Set(l.getNowCommonsRows(function(){return!0}).get().flatMap(function(a){return a.uploaders}))).sort().map(function(a){return $("<option/>").val(a).text(a)[0]}));
C.val(a)}var e,f,k,h,n,g,m,u,L,K,fa,Z,v,O,B,ca,D,R,S,q,T,z,r,E,F,U,l,G,p,t,y,V,H,I,J,da,C,ia,W,A,ba,P,Q,ea,X,Y;return d.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:return e="#auto-delete",f="#auto-mark",k=e+"-remove-deleted",h=e+"-nc",n=e+"-ok",g=e+"-test",m=f+"-ok",u=f+"-test",L=f+"-text",K=f+"-text-omit",fa=".delete",Z=".mark-auto",v="ncAction",O="name",B=".nc-row",ca="reason",D="selected",R="."+D,S=new M,ha(function(){$("#ready-count").html(Math.floor($("input.file").length/
$("#files-count").val()*100));return!$.isReady}),x.yield($.ready,2);case 2:return q=function(){},q.prototype.match=function(){},T=function(a){var b=q.call(this)||this;b._user=a;return b},d.inherits(T,q),T.prototype.match=function(a){return a.uploaders.includes(this._user)},z=function(a){var b=q.call(this)||this;b.match=a;return b},d.inherits(z,q),r=function(){var a=q.call(this)||this;a.__matchOne=a._matchOne.bind(a);return a},d.inherits(r,q),r.prototype.match=function(a){a=a.texts.some(this.__matchOne);
this._filter&&(a=this._filter(a));return a},r.prototype.setFilter=function(a){this._filter=a},E=function(a){var b=r.call(this)||this;b._regex=a;return b},d.inherits(E,r),E.prototype._matchOne=function(a){return a.match(this._regex)},F=function(a){var b=r.call(this)||this;b._needle=a;return b},d.inherits(F,r),F.prototype._matchOne=function(a){return-1<a.toUpperCase().indexOf(this._needle)},U=function(a){this._div=a;this.texts=$(".text",a).get().map(function(a){return $(a).text()});this.deleteLink=
$(fa,a)},U.prototype.toggleSelect=function(a){this._div.toggleClass(D,a)},d.global.Object.defineProperties(U.prototype,{deleteReason:{configurable:!0,enumerable:!0,get:function(){return this.deleteLink.data(ca)}},localName:{configurable:!0,enumerable:!0,get:function(){return this.deleteLink.data(O)}},nowCommonsLink:{configurable:!0,enumerable:!0,get:function(){return $(".nowcommons",this._div)}},selected:{configurable:!0,enumerable:!0,get:function(){return this._div.is(R)}},hasWarnings:{configurable:!0,
enumerable:!0,get:function(){return $(".mark-problematic,.mark-keeplocal,.error-warning",this._div)[0]}},hasLinks:{configurable:!0,enumerable:!0,get:function(){return $(".linkback",this._div)[0]}},needsTransfer:{configurable:!0,enumerable:!0,get:function(){return $(".oldver",this._div)[0]}},hasTalk:{configurable:!0,enumerable:!0,get:function(){return $(".talk",this._div)[0]}},uploaders:{configurable:!0,enumerable:!0,get:function(){return $(".user",this._div).get().map(function(a){return $(a).text()})}}}),
l=function(){},l.prototype._run=function(){},l.prototype.run=function(){var a=this.test().get().slice(this.min(),this.max());this.confirm(a.length)&&this._run(a);this.postRun()},l.prototype.postRun=function(){},l.prototype.confirm=function(){return!0},l.prototype.min=function(){return 0},l.prototype.max=function(){return Number.MAX_VALUE},l.prototype.test=function(){},l.getNowCommonsRows=function(a){return $(B).map(function(){var b=new U($(this).prev(B).addBack());if(a(b))return b})},G=function(a){var b=
l.call(this)||this;b._action=a;return b},d.inherits(G,l),G.prototype.run=function(){return this._action.run.call(this._action)},G.prototype.test=function(){return this._action.test.call(this._action)},p=function(){return l.apply(this,arguments)||this},d.inherits(p,l),p.prototype.confirm=function(a){return confirm("Delete "+a+" files?")},p.prototype._run=function(a){this._markedRun(a)},p.prototype.test=function(){return l.getNowCommonsRows(function(a){return a.selected})},p.prototype.max=function(){return Q.val()},
p.prototype.postRun=function(){X.close()},t=function(){return l.apply(this,arguments)||this},d.inherits(t,l),t.prototype.min=function(){return+ba.val()},t.prototype.max=function(){return+P.val()},t.prototype._run=function(a){this.rows=a;a.forEach(function(a){a.toggleSelect(!0)})},t.prototype.test=function(){var a=$(L).val().trim().replace(/\n/g,"").trim(),c=b(a),e=$(K).val().trim().replace(/\n/g,"").trim(),f=b(e),h=C.val().trim(),g=[];if(!a&&!h)throw"Please enter a value into the text box.";h&&g.push(new T(h));
a&&g.push(c?new E(c):new F(a.toUpperCase()));e&&(a=f?new E(f):new F(e.toUpperCase()),a.setFilter(function(a){return!a}),g.push(a));$("#include-warnings:checked")[0]||g.push(new z(function(a){return!a.hasWarnings}));$("#include-diff-name:checked")[0]||g.push(new z(function(a){return!a.hasLinks}));$("#include-multiple:checked")[0]||g.push(new z(function(a){return!a.needsTransfer}));$("#include-talk:checked")[0]||g.push(new z(function(a){return!a.hasTalk}));return l.getNowCommonsRows(function(a){return g.every(function(b){return b.match(a)})})},
t.prototype.postRun=function(){Y.close()},y=function(){return p.apply(this,arguments)||this},d.inherits(y,p),y.prototype._markedRun=function(b){var c=this._getAutoOpenLink.bind(this);b.forEach(function(b){open(c(b).attr("href"),"_blank");b.toggleSelect(!1);a(b.localName)})},V=function(){return p.apply(this,arguments)||this},d.inherits(V,p),V.prototype._markedRun=function(a){var b={};a.forEach(function(a){a=$(a.deleteLink);b[a.data(O)]=a.data(ca)});A.text(+A.text()+a.length);S.postMessage(b)},H=function(){return y.apply(this,
arguments)||this},d.inherits(H,y),H.prototype._getAutoOpenLink=function(a){return a.deleteLink},I=function(){return y.apply(this,arguments)||this},d.inherits(I,y),I.prototype.confirm=function(a){return confirm("Delete "+a+" files?")},I.prototype._getAutoOpenLink=function(a){return a.nowCommonsLink},J=new G(new H),$(window).on("beforeunload",function(){var a=$(R).length/2;if(a)return"You have "+a+" selections outstanding"}),da=$(".close-buttons"),C=$("#auto-user"),ia=$(k),W=$(h),A=$(".ajax-count"),
ba=$("#auto-mark-start"),P=$("#auto-mark-count"),Q=$("#auto-delete-count"),c(),$("#doc-load-per,.ready-count,.bottom-buttons").toggle(),$(Z).click(function(){$(this).closest(B).toggleClass(D)}),$("#clear-marks").click(function(){$(R).removeClass(D)}),$(".delink,"+Z).click(function(a){a.preventDefault()}),$(L+","+K).on("keydown paste drop focus",function(){var a=this;setTimeout(function(){var c=$(a);c.toggleClass("regex",!!b(c.val()))},1)}),W.change(function(){J._action=W.is(":checked")?new I:new H}),
$(m+","+u).data(v,new t),$(n+","+g).data(v,J),$(n+","+m).click(function(){try{$(this).data(v).run()}catch(aa){alert(aa)}}),$(u+","+g).click(function(){try{$("#count").html($(this).data(v).test().length),ea.open()}catch(aa){alert(aa)}}),da.click(function(){$(".bottom-buttons-buttons > *").animate({width:"toggle"},350);da.toggleClass("glyphicon-menu-left")}),ea=new w("#auto-files-found"),ea.addCloseButton("#auto-delete-found-ok"),X=new w(e,{open:function(){var a=J.test().length;Q.val(a).attr("max",
a)}}),X.addOpenButton("#auto-delete-open"),X.addCloseButton("#auto-delete-cancel"),Y=new w(f),Y.addOpenButton(f+"-open"),Y.addCloseButton(f+"-cancel"),x.setCatchFinallyBlocks(3),x.yield(S.ready(),5);case 5:A.text(0);N({css:{background:"#000099"},message:"Ajax delete detected"});J._action=new V;W.closest(".table-row").hide();S.addListener(function(b){A.text(A.text()-1);"success"===b.status?(N({css:{background:"#009999"},delay:2E3,message:b.page+": deleted"}),a(b.page)):N(b.page+": "+b.message)});x.leaveTryBlock(0);
break;case 3:x.enterCatchBlock(),N({css:{background:"#990000"},message:"Ajax detection failed"}),x.jumpToEnd()}})})();}).call(this);

//# sourceMappingURL=nowcommonslist.js.map