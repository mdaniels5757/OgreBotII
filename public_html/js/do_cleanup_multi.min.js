(function(){var c=c||{};c.scope={};c.ASSUME_ES5=!1;c.ASSUME_NO_NATIVE_MAP=!1;c.ASSUME_NO_NATIVE_SET=!1;c.defineProperty=c.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)};c.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};c.global=c.getGlobal(this);c.SYMBOL_PREFIX="jscomp_symbol_";
c.initSymbol=function(){c.initSymbol=function(){};c.global.Symbol||(c.global.Symbol=c.Symbol)};c.Symbol=function(){var a=0;return function(b){return c.SYMBOL_PREFIX+(b||"")+a++}}();c.initSymbolIterator=function(){c.initSymbol();var a=c.global.Symbol.iterator;a||(a=c.global.Symbol.iterator=c.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&c.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return c.arrayIterator(this)}});c.initSymbolIterator=function(){}};
c.arrayIterator=function(a){var b=0;return c.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};c.iteratorPrototype=function(a){c.initSymbolIterator();a={next:a};a[c.global.Symbol.iterator]=function(){return this};return a};c.makeIterator=function(a){c.initSymbolIterator();c.initSymbol();c.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):c.arrayIterator(a)};
c.polyfill=function(a,b){if(b){var d=c.global;a=a.split(".");for(var g=0;g<a.length-1;g++){var f=a[g];f in d||(d[f]={});d=d[f]}a=a[a.length-1];g=d[a];b=b(g);b!=g&&null!=b&&c.defineProperty(d,a,{configurable:!0,writable:!0,value:b})}};c.FORCE_POLYFILL_PROMISE=!1;
c.polyfill("Promise",function(a){function b(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var e=this.createResolveAndReject_();try{a(e.resolve,e.reject)}catch(k){e.reject(k)}}function d(){this.batch_=null}function g(a){return a instanceof b?a:new b(function(e){e(a)})}if(a&&!c.FORCE_POLYFILL_PROMISE)return a;d.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};d.prototype.asyncExecuteBatch_=function(){var a=
this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var f=c.global.setTimeout;d.prototype.asyncExecuteFunction=function(a){f(a,0)};d.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var k=a[b];delete a[b];try{k()}catch(m){this.asyncThrow_(m)}}}this.batch_=null};d.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};b.prototype.createResolveAndReject_=function(){function a(a){return function(e){k||
(k=!0,a.call(b,e))}}var b=this,k=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};b.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof b)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var e=null!=a;break a;case "function":e=!0;break a;default:e=!1}e?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};b.prototype.resolveToNonPromiseObj_=function(a){var b=void 0;try{b=a.then}catch(k){this.reject_(k);
return}"function"==typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};b.prototype.reject_=function(a){this.settle_(2,a)};b.prototype.fulfill_=function(a){this.settle_(1,a)};b.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};b.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=this.onSettledCallbacks_,
b=0;b<a.length;++b)a[b].call(),a[b]=null;this.onSettledCallbacks_=null}};var h=new d;b.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};b.prototype.settleSameAsThenable_=function(a,b){var e=this.createResolveAndReject_();try{a.call(b,e.resolve,e.reject)}catch(m){e.reject(m)}};b.prototype.then=function(a,d){function e(a,b){return"function"==typeof a?function(b){try{g(a(b))}catch(y){l(y)}}:b}var g,l,f=new b(function(a,b){g=a;l=b});
this.callWhenSettled_(e(a,g),e(d,l));return f};b.prototype.catch=function(a){return this.then(void 0,a)};b.prototype.callWhenSettled_=function(a,b){function e(){switch(d.state_){case 1:a(d.result_);break;case 2:b(d.result_);break;default:throw Error("Unexpected state: "+d.state_);}}var d=this;null==this.onSettledCallbacks_?h.asyncExecute(e):this.onSettledCallbacks_.push(function(){h.asyncExecute(e)})};b.resolve=g;b.reject=function(a){return new b(function(b,e){e(a)})};b.race=function(a){return new b(function(b,
e){for(var d=c.makeIterator(a),l=d.next();!l.done;l=d.next())g(l.value).callWhenSettled_(b,e)})};b.all=function(a){var d=c.makeIterator(a),e=d.next();return e.done?g([]):new b(function(a,b){function l(b){return function(e){f[b]=e;h--;0==h&&a(f)}}var f=[],h=0;do f.push(void 0),h++,g(e.value).callWhenSettled_(l(f.length-1),b),e=d.next();while(!e.done)})};return b},"es6","es3");
c.executeAsyncGenerator=function(a){function b(b){return a.next(b)}function d(b){return a.throw(b)}return new Promise(function(g,f){function h(a){a.done?g(a.value):Promise.resolve(a.value).then(b,d).then(h,f)}h(a.next())})};
if(angular)angular.module("app",[]).controller("progress",["$scope","$http","$timeout",function(a,b,d){return c.executeAsyncGenerator(function(){function g(a){var b="";a=(a/1E3).toFixed(0);var d=a%60;a=(a-d)/60;var e=a%60;(a=(a-e)/60)&&(b=a+" hours, ");if(a||e)b+=e+" minutes, ";return""+b+d+" seconds"}function f(f,m,w){for(;;)switch(h){case 0:return k=new Date,a.lines=[],a.changedTotal=function(){return a.lines.filter(function(a){return a.changed}).length},h=1,{value:d(),done:!1};case 1:if(1!=f){h=
2;break}h=-1;throw w;case 2:if(!a.error){h=3;break}h=-1;return{value:void 0,done:!0};case 3:p=0,function x(){b.post("do_cleanup_multi_json.php?line="+p+"&request_key="+a.request_key).then(function(b){if(b=b.data){p=b.lineNum;if(b.startup)var f=a.started=!0;null!=b.count&&(a.filesCount=b.count,f=!0);b.lines&&b.lines.length&&(a.lines=a.lines.concat(b.lines),a.scrollBottom&&window.setTimeout(function(){window.scrollTo(0,window.document.body.scrollHeight)}),f=!0);if(b.complete)a.complete=!0,a.runTime=
g(new Date-k);else if(b.error)a.processError=!0;else{if(f)e=null;else if(e){if(3E5<(new Date).getTime()-e){a.processError=!0;return}}else e=(new Date).getTime();d(x,5E3)}}else a.processError=!0},function(){a.processError=!0})}(),h=-1;default:return{value:void 0,done:!0}}}var h=0,e,p,k,m={next:function(a){return f(0,a,void 0)},throw:function(a){return f(1,void 0,a)},return:function(){throw Error("Not yet implemented");}};c.initSymbolIterator();m[Symbol.iterator]=function(){return this};return m}())}]).filter("escape",
function(){return function(a){return encodeURIComponent(a).replace(/%2F/g,"/").replace(/%3A/g,":").replace(/%20/g,"_")}}).filter("round",function(){return function(a,b){return a.toFixed(+b)}});else{var n=$("#src"),q=n.attr("value"),r=$("#test-search"),t=$("form"),u=$("#ident-cookie"),z=function(){v.attr("disabled",$("#checkbox-disclaimers").is(":checked")?null:"disabled")},v;$("#ident-frame").on("load",function(){this.contentWindow.postMessage({watch:!0},window.location.origin);window.onmessage=function(a){a.origin===
location.origin&&(a=a.data.cookie,$(".submit_button").toggle(!!a),$("#verify-text").toggle(!a),u.val(a))}});$("#start,#end").datetimepicker({dateFormat:"yy/mm/dd",timeFormat:"HH:mm:ss"});$("[name='type']").change(function(){var a=$("#type-text"),b=$(".uploader-option"),d=$(this).val(),g=$("#subcategories-wrapper"),f=g.parent();g.add(r).add(b).hide();f.css("height","initial");n.val("");a.text(d.substr(0,1).toUpperCase()+d.substr(1));"category"===d?(g.show(),n.val(q)):"search"===d?(f.css("height",f.height()+
"px"),r.show()):b.show()}).change();r.click(function(){window.open("//commons.wikimedia.org/w/index.php?title=Special:Search&fulltext=Search&ns6=1&search="+window.encodeURIComponent(n.val()),"_blank")});t.submit(function(a){if(!u.val())return!1;n.val($.trim(n.val()));if("category"===$("[name='type']").val()&&!n.val().match(/^category:\S/i))return $("<div/>").html("Please input a valid category").dialog({modal:!0,width:400,buttons:{OK:function(){$(this).dialog("close")}}}),a.stopImmediatePropagation(),
!1});t.submit(function b(){$("#dialog-disclaimers").dialog({modal:!0,width:600,buttons:{OK:function(){$(this).dialog("close");t.off("submit",b).submit()},Cancel:function(){$(this).dialog("close")}},open:function(){v=$("button:eq(1)",$(this).parent());z()}});return!1});$("#checkbox-disclaimers").change(z)};}).call(this);

//# sourceMappingURL=js/do_cleanup_multi.js.map
